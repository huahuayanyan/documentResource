<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="B_CNT_MPROT_BASE_INFO" >
  <resultMap id="BaseResultMap" class="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    <result column="PROTOCOL_NO" property="protocolNo" jdbcType="VARCHAR" />
    <result column="PROTOCOL_CODE" property="protocolCode" jdbcType="VARCHAR" />
    <result column="PROTOCOL_TYPE" property="protocolType" jdbcType="CHAR" />
    <result column="PRODUCT_ID" property="productId" jdbcType="VARCHAR" />
    <result column="SIGN_DATE" property="signDate" jdbcType="CHAR" />
    <result column="START_DATE" property="startDate" jdbcType="CHAR" />
    <result column="END_DATE" property="endDate" jdbcType="CHAR" />
    <result column="TENOR" property="tenor" jdbcType="VARCHAR" />
    <result column="CURCD" property="curcd" jdbcType="CHAR" />
    <result column="PROT_AMT" property="protAmt" jdbcType="DECIMAL" />
    <result column="SIGN_IN" property="signIn" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="CHAR" />
    <result column="OTHER_DES" property="otherDes" jdbcType="VARCHAR" />
    <result column="STATE" property="state" jdbcType="CHAR" />
    <result column="TLRNO" property="tlrno" jdbcType="VARCHAR" />
    <result column="BRCODE" property="brcode" jdbcType="VARCHAR" />
    <result column="UPDATE_STATE" property="updateState" jdbcType="CHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="TIMESTAMP" />
    <result column="OTHERPROTOCOL_NO" property="otherprotocolNo" jdbcType="VARCHAR" />
    <result column="LOAN_PERCENT" property="loanPercent" jdbcType="DECIMAL" />
    <result column="MONI_TYPE" property="moniType" jdbcType="CHAR" />
    <result column="LOW_PRICE_NEW" property="lowPriceNew" jdbcType="DECIMAL" />
    <result column="ARRIVED_MANAGE_MODE" property="arrivedManageMode" jdbcType="CHAR" />
    <result column="SELL_OFF_FLAG" property="sellOffFlag" jdbcType="CHAR" />
    <result column="PRICE_DROP_RATE" property="priceDropRate" jdbcType="DECIMAL" />
    <result column="COOPERATION_BRCODE" property="cooperationBrcode" jdbcType="VARCHAR" />
    <result column="CIRCLE_LOAN_FLAG" property="circleLoanFlag" jdbcType="CHAR" />
    <result column="TRIPLE_PROTOCOL_TYPE" property="tripleProtocolType" jdbcType="CHAR" />
    <result column="DELIVERY_MODE" property="deliveryMode" jdbcType="VARCHAR" />
  </resultMap>
   <resultMap id="ThreeProtocolVOMap" class="com.huateng.scf.bas.cnt.dao.model.ThreeProtocolVO" >
    <result column="CUSTCD"              property="custcd"/>           
	<result column="BALANCEACCOUNT"      property="balanceAccount"/>   
	<result column="BAILACCOUNT"         property="bailAccount"  />    
	<result column="SELLERREGADDR"       property="sellerRegAddr"  />  
	<result column="SELLERCONTACTNAME"   property="sellerContactName"/>
	<result column="CORECUSTCD"          property="coreCustcd"     />  
	<result column="COREACCOUNT"         property="coreAccount"    /> 
	<result column="COREREGADDR"         property="coreRegAddr"   />   
	<result column="CORECONTACTNAME"     property="coreContactName" />
	<result column="FOUCD"               property="fouCd"      />      
	<result column="REFUNDACCOUNT"       property="refundAccount" /> 
	<result column="SELLERNM"       property="sellerNm" />
	<result column="CORENM"        property="coreNm" />   
	<result column="FOUNAME"       property="fouName" />  
    <result column="PROTOCOL_NO" property="protocolNo" jdbcType="VARCHAR" />
    <result column="PROTOCOL_CODE" property="protocolCode" />
    <result column="PROTOCOL_TYPE" property="protocolType" jdbcType="CHAR" />
    <result column="PRODUCT_ID" property="productId" jdbcType="VARCHAR" />
    <result column="SIGN_DATE" property="signDate" jdbcType="CHAR" />
    <result column="START_DATE" property="startDate" jdbcType="CHAR" />
    <result column="END_DATE" property="endDate" jdbcType="CHAR" />
    <result column="TENOR" property="tenor" jdbcType="VARCHAR" />
    <result column="CURCD" property="curcd" jdbcType="CHAR" />
    <result column="PROT_AMT" property="protAmt" jdbcType="DECIMAL" />
    <result column="SIGN_IN" property="signIn" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="CHAR" />
    <result column="OTHER_DES" property="otherDes" jdbcType="VARCHAR" />
    <result column="STATE" property="state" jdbcType="CHAR" />
    <result column="TLRNO" property="tlrno" jdbcType="VARCHAR" />
    <result column="BRCODE" property="brcode" jdbcType="VARCHAR" />
    <result column="UPDATE_STATE" property="updateState" jdbcType="CHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="TIMESTAMP" />
    <result column="OTHERPROTOCOL_NO" property="otherprotocolNo" jdbcType="VARCHAR" />
    <result column="LOAN_PERCENT" property="loanPercent" jdbcType="DECIMAL" />
    <result column="MONI_TYPE" property="moniType" jdbcType="CHAR" />
    <result column="LOW_PRICE_NEW" property="lowPriceNew" jdbcType="DECIMAL" />
    <result column="ARRIVED_MANAGE_MODE" property="arrivedManageMode" jdbcType="CHAR" />
    <result column="SELL_OFF_FLAG" property="sellOffFlag" jdbcType="CHAR" />
    <result column="PRICE_DROP_RATE" property="priceDropRate" jdbcType="DECIMAL" />
    <result column="COOPERATION_BRCODE" property="cooperationBrcode" jdbcType="VARCHAR" />
    <result column="BAIL_AMOUNT" property="bailAmount" jdbcType="DECIMAL" />
    <result column="FIRST_BAIL_RATIO" property="firstBailRatio" jdbcType="DECIMAL" />
    <result column="FIRST_BAIL_TYPE" property="firstBailType" jdbcType="CHAR" />
    <result column="LOAN_WAY" property="loanWay" jdbcType="VARCHAR" />
    <result column="LOAN_DAYS" property="loanDays" />
    <result column="ARRIVED_MANAGE_MODE" property="arrivedManageMode" jdbcType="CHAR" />
    <result column="GOODS_NM" property="goodsNm" jdbcType="VARCHAR" />
    <result column="TAKE_MODE" property="takeMode" jdbcType="VARCHAR" />
    <result column="CORE_CUST_DUTY" property="coreCustDuty" jdbcType="CHAR" />
    <result column="MORTGAGE_MANAGE_MODE" property="mortgageManageMode" jdbcType="CHAR" />
    <result column="IS_INSURANCE" property="isInsurance" jdbcType="CHAR" />
    <result column="FOU_ADDRESS" property="fouAddress" jdbcType="CHAR" />
    <result column="TRI_CONVENTIONS" property="triConventions" jdbcType="VARCHAR" />
    <result column="CONDIGNEE" property="condignee" jdbcType="VARCHAR" />
    <result column="TRASPORTATION_MODE" property="trasportationMode" jdbcType="VARCHAR" />
    <result column="DELIVERY_POINTS" property="deliveryPoints" jdbcType="VARCHAR" />
    <result column="DESTINATION" property="destination" jdbcType="VARCHAR" />
    <result column="DELIVERY_AMOUNT" property="deliveryAmount" jdbcType="DECIMAL" />
    <result column="DUTY_ASSUME_TYPE" property="dutyAssumeType" jdbcType="VARCHAR" />
    <result column="OTHER_CUST_NAME" property="otherCustName" jdbcType="VARCHAR" />
    <result column="PRODUCT_NAME" property="productName" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$ #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <sql id="Base_Column_List" >
    PROTOCOL_NO, PROTOCOL_CODE, PROTOCOL_TYPE, PRODUCT_ID, SIGN_DATE, START_DATE, END_DATE, 
    TENOR, CURCD, PROT_AMT, SIGN_IN, STATUS, OTHER_DES, STATE, TLRNO, BRCODE, UPDATE_STATE, 
    UPDATE_DATE, OTHERPROTOCOL_NO, LOAN_PERCENT, MONI_TYPE, LOW_PRICE_NEW, ARRIVED_MANAGE_MODE, 
    SELL_OFF_FLAG, PRICE_DROP_RATE, COOPERATION_BRCODE, CIRCLE_LOAN_FLAG, TRIPLE_PROTOCOL_TYPE, 
    DELIVERY_MODE
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfoExample" >
    select
    <isParameterPresent >
      <isEqual property="distinct" compareValue="true" >
        distinct
      </isEqual>
    </isParameterPresent>
    <include refid="B_CNT_MPROT_BASE_INFO.Base_Column_List" />
    from B_CNT_MPROT_BASE_INFO
    <isParameterPresent >
      <include refid="B_CNT_MPROT_BASE_INFO.Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    select 
    <include refid="B_CNT_MPROT_BASE_INFO.Base_Column_List" />
    from B_CNT_MPROT_BASE_INFO
    where PROTOCOL_NO = #protocolNo:VARCHAR#
  </select>
  <!-- 现货抵押处理 -->
  <select id="selectByCondition" resultClass="java.util.HashMap" parameterClass="java.util.HashMap" >
    SELECT 
    	mppi.protocol_No AS NO,mppi_3.cname AS NAME 
    FROM B_CNT_MPROT_BASE_INFO mpbi,B_CNT_MPROT_PART_INFO mppi,B_CNT_MPROT_PART_INFO mppi_2,
    	B_CNT_MPROT_PART_INFO mppi_3,B_CNT_MPROT_CM_INFO mpci
	WHERE 1=1
    and mppi.protocol_No=mpci.protocol_No and mpbi.protocol_No=mppi.protocol_No
    and mppi_2.protocol_No=mpci.protocol_No and mpbi.protocol_No=mppi_2.protocol_No
    and mppi_3.protocol_No=mpci.protocol_No and mpbi.protocol_No=mppi_3.protocol_No
    and mpbi.PROTOCOL_NO = #protocolNo:VARCHAR# and mppi.role= #onerole:VARCHAR#
    and mppi_2.role= #tworole:VARCHAR# and mppi_3.role= #threerole:VARCHAR#
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    delete from B_CNT_MPROT_BASE_INFO
    where PROTOCOL_NO = #protocolNo:VARCHAR#
  </delete>
  <delete id="deleteByExample" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfoExample" >
    delete from B_CNT_MPROT_BASE_INFO
    <include refid="B_CNT_MPROT_BASE_INFO.Example_Where_Clause" />
  </delete>
  <insert id="insert" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    insert into B_CNT_MPROT_BASE_INFO (PROTOCOL_NO, PROTOCOL_CODE, PROTOCOL_TYPE, PRODUCT_ID, 
      SIGN_DATE, START_DATE, END_DATE, TENOR, CURCD, 
      PROT_AMT, SIGN_IN, STATUS, OTHER_DES, STATE, 
      TLRNO, BRCODE, UPDATE_STATE, UPDATE_DATE, 
      OTHERPROTOCOL_NO, LOAN_PERCENT, MONI_TYPE, LOW_PRICE_NEW, 
      ARRIVED_MANAGE_MODE, SELL_OFF_FLAG, PRICE_DROP_RATE, COOPERATION_BRCODE, 
      CIRCLE_LOAN_FLAG, TRIPLE_PROTOCOL_TYPE, DELIVERY_MODE)
    values (#protocolNo:VARCHAR#, #protocolCode:VARCHAR#, #protocolType:CHAR#, #productId:VARCHAR#, 
      #signDate:CHAR#, #startDate:CHAR#, #endDate:CHAR#, #tenor:VARCHAR#, #curcd:CHAR#, 
      #protAmt:DECIMAL#, #signIn:VARCHAR#, #status:CHAR#, #otherDes:VARCHAR#, #state:CHAR#, 
      #tlrno:VARCHAR#, #brcode:VARCHAR#, #updateState:CHAR#, #updateDate:TIMESTAMP#, 
      #otherprotocolNo:VARCHAR#, #loanPercent:DECIMAL#, #moniType:CHAR#, #lowPriceNew:DECIMAL#, 
      #arrivedManageMode:CHAR#, #sellOffFlag:CHAR#, #priceDropRate:DECIMAL#, #cooperationBrcode:VARCHAR#, 
      #circleLoanFlag:CHAR#, #tripleProtocolType:CHAR#, #deliveryMode:VARCHAR#)
  </insert>
  <insert id="insertSelective" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    insert into B_CNT_MPROT_BASE_INFO
    <dynamic prepend="(" >
      <isNotNull prepend="," property="protocolNo" >
        PROTOCOL_NO
      </isNotNull>
      <isNotNull prepend="," property="protocolCode" >
        PROTOCOL_CODE
      </isNotNull>
      <isNotNull prepend="," property="protocolType" >
        PROTOCOL_TYPE
      </isNotNull>
      <isNotNull prepend="," property="productId" >
        PRODUCT_ID
      </isNotNull>
      <isNotNull prepend="," property="signDate" >
        SIGN_DATE
      </isNotNull>
      <isNotNull prepend="," property="startDate" >
        START_DATE
      </isNotNull>
      <isNotNull prepend="," property="endDate" >
        END_DATE
      </isNotNull>
      <isNotNull prepend="," property="tenor" >
        TENOR
      </isNotNull>
      <isNotNull prepend="," property="curcd" >
        CURCD
      </isNotNull>
      <isNotNull prepend="," property="protAmt" >
        PROT_AMT
      </isNotNull>
      <isNotNull prepend="," property="signIn" >
        SIGN_IN
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS
      </isNotNull>
      <isNotNull prepend="," property="otherDes" >
        OTHER_DES
      </isNotNull>
      <isNotNull prepend="," property="state" >
        STATE
      </isNotNull>
      <isNotNull prepend="," property="tlrno" >
        TLRNO
      </isNotNull>
      <isNotNull prepend="," property="brcode" >
        BRCODE
      </isNotNull>
      <isNotNull prepend="," property="updateState" >
        UPDATE_STATE
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE
      </isNotNull>
      <isNotNull prepend="," property="otherprotocolNo" >
        OTHERPROTOCOL_NO
      </isNotNull>
      <isNotNull prepend="," property="loanPercent" >
        LOAN_PERCENT
      </isNotNull>
      <isNotNull prepend="," property="moniType" >
        MONI_TYPE
      </isNotNull>
      <isNotNull prepend="," property="lowPriceNew" >
        LOW_PRICE_NEW
      </isNotNull>
      <isNotNull prepend="," property="arrivedManageMode" >
        ARRIVED_MANAGE_MODE
      </isNotNull>
      <isNotNull prepend="," property="sellOffFlag" >
        SELL_OFF_FLAG
      </isNotNull>
      <isNotNull prepend="," property="priceDropRate" >
        PRICE_DROP_RATE
      </isNotNull>
      <isNotNull prepend="," property="cooperationBrcode" >
        COOPERATION_BRCODE
      </isNotNull>
      <isNotNull prepend="," property="circleLoanFlag" >
        CIRCLE_LOAN_FLAG
      </isNotNull>
      <isNotNull prepend="," property="tripleProtocolType" >
        TRIPLE_PROTOCOL_TYPE
      </isNotNull>
      <isNotNull prepend="," property="deliveryMode" >
        DELIVERY_MODE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="protocolNo" >
        #protocolNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="protocolCode" >
        #protocolCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="protocolType" >
        #protocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="productId" >
        #productId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="signDate" >
        #signDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="startDate" >
        #startDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="endDate" >
        #endDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tenor" >
        #tenor:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="curcd" >
        #curcd:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="protAmt" >
        #protAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="signIn" >
        #signIn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        #status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="otherDes" >
        #otherDes:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="state" >
        #state:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tlrno" >
        #tlrno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="brcode" >
        #brcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateState" >
        #updateState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        #updateDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="otherprotocolNo" >
        #otherprotocolNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="loanPercent" >
        #loanPercent:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="moniType" >
        #moniType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="lowPriceNew" >
        #lowPriceNew:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="arrivedManageMode" >
        #arrivedManageMode:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="sellOffFlag" >
        #sellOffFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="priceDropRate" >
        #priceDropRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="cooperationBrcode" >
        #cooperationBrcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="circleLoanFlag" >
        #circleLoanFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tripleProtocolType" >
        #tripleProtocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryMode" >
        #deliveryMode:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="countByExample" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfoExample" resultClass="java.lang.Integer" >
    select count(*) from B_CNT_MPROT_BASE_INFO
    <include refid="B_CNT_MPROT_BASE_INFO.Example_Where_Clause" />
  </select>
  <update id="updateByExampleSelective" >
    update B_CNT_MPROT_BASE_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.protocolNo" >
        PROTOCOL_NO = #record.protocolNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.protocolCode" >
        PROTOCOL_CODE = #record.protocolCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.protocolType" >
        PROTOCOL_TYPE = #record.protocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productId" >
        PRODUCT_ID = #record.productId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.signDate" >
        SIGN_DATE = #record.signDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.startDate" >
        START_DATE = #record.startDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.endDate" >
        END_DATE = #record.endDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.tenor" >
        TENOR = #record.tenor:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.curcd" >
        CURCD = #record.curcd:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.protAmt" >
        PROT_AMT = #record.protAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.signIn" >
        SIGN_IN = #record.signIn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        STATUS = #record.status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.otherDes" >
        OTHER_DES = #record.otherDes:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.state" >
        STATE = #record.state:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.tlrno" >
        TLRNO = #record.tlrno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.brcode" >
        BRCODE = #record.brcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.updateState" >
        UPDATE_STATE = #record.updateState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.updateDate" >
        UPDATE_DATE = #record.updateDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.otherprotocolNo" >
        OTHERPROTOCOL_NO = #record.otherprotocolNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.loanPercent" >
        LOAN_PERCENT = #record.loanPercent:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.moniType" >
        MONI_TYPE = #record.moniType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.lowPriceNew" >
        LOW_PRICE_NEW = #record.lowPriceNew:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.arrivedManageMode" >
        ARRIVED_MANAGE_MODE = #record.arrivedManageMode:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sellOffFlag" >
        SELL_OFF_FLAG = #record.sellOffFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.priceDropRate" >
        PRICE_DROP_RATE = #record.priceDropRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.cooperationBrcode" >
        COOPERATION_BRCODE = #record.cooperationBrcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.circleLoanFlag" >
        CIRCLE_LOAN_FLAG = #record.circleLoanFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.tripleProtocolType" >
        TRIPLE_PROTOCOL_TYPE = #record.tripleProtocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.deliveryMode" >
        DELIVERY_MODE = #record.deliveryMode:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="B_CNT_MPROT_BASE_INFO.Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByExample" >
    update B_CNT_MPROT_BASE_INFO
    set PROTOCOL_NO = #record.protocolNo:VARCHAR#,
      PROTOCOL_CODE = #record.protocolCode:VARCHAR#,
      PROTOCOL_TYPE = #record.protocolType:CHAR#,
      PRODUCT_ID = #record.productId:VARCHAR#,
      SIGN_DATE = #record.signDate:CHAR#,
      START_DATE = #record.startDate:CHAR#,
      END_DATE = #record.endDate:CHAR#,
      TENOR = #record.tenor:VARCHAR#,
      CURCD = #record.curcd:CHAR#,
      PROT_AMT = #record.protAmt:DECIMAL#,
      SIGN_IN = #record.signIn:VARCHAR#,
      STATUS = #record.status:CHAR#,
      OTHER_DES = #record.otherDes:VARCHAR#,
      STATE = #record.state:CHAR#,
      TLRNO = #record.tlrno:VARCHAR#,
      BRCODE = #record.brcode:VARCHAR#,
      UPDATE_STATE = #record.updateState:CHAR#,
      UPDATE_DATE = #record.updateDate:TIMESTAMP#,
      OTHERPROTOCOL_NO = #record.otherprotocolNo:VARCHAR#,
      LOAN_PERCENT = #record.loanPercent:DECIMAL#,
      MONI_TYPE = #record.moniType:CHAR#,
      LOW_PRICE_NEW = #record.lowPriceNew:DECIMAL#,
      ARRIVED_MANAGE_MODE = #record.arrivedManageMode:CHAR#,
      SELL_OFF_FLAG = #record.sellOffFlag:CHAR#,
      PRICE_DROP_RATE = #record.priceDropRate:DECIMAL#,
      COOPERATION_BRCODE = #record.cooperationBrcode:VARCHAR#,
      CIRCLE_LOAN_FLAG = #record.circleLoanFlag:CHAR#,
      TRIPLE_PROTOCOL_TYPE = #record.tripleProtocolType:CHAR#,
      DELIVERY_MODE = #record.deliveryMode:VARCHAR#
    <isParameterPresent >
      <include refid="B_CNT_MPROT_BASE_INFO.Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateByPrimaryKeySelective" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    update B_CNT_MPROT_BASE_INFO
    <dynamic prepend="set" >
      <isNotNull prepend="," property="protocolCode" >
        PROTOCOL_CODE = #protocolCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="protocolType" >
        PROTOCOL_TYPE = #protocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="productId" >
        PRODUCT_ID = #productId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="signDate" >
        SIGN_DATE = #signDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="startDate" >
        START_DATE = #startDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="endDate" >
        END_DATE = #endDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tenor" >
        TENOR = #tenor:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="curcd" >
        CURCD = #curcd:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="protAmt" >
        PROT_AMT = #protAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="signIn" >
        SIGN_IN = #signIn:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="otherDes" >
        OTHER_DES = #otherDes:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="state" >
        STATE = #state:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tlrno" >
        TLRNO = #tlrno:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="brcode" >
        BRCODE = #brcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateState" >
        UPDATE_STATE = #updateState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateDate" >
        UPDATE_DATE = #updateDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="otherprotocolNo" >
        OTHERPROTOCOL_NO = #otherprotocolNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="loanPercent" >
        LOAN_PERCENT = #loanPercent:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="moniType" >
        MONI_TYPE = #moniType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="lowPriceNew" >
        LOW_PRICE_NEW = #lowPriceNew:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="arrivedManageMode" >
        ARRIVED_MANAGE_MODE = #arrivedManageMode:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="sellOffFlag" >
        SELL_OFF_FLAG = #sellOffFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="priceDropRate" >
        PRICE_DROP_RATE = #priceDropRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="cooperationBrcode" >
        COOPERATION_BRCODE = #cooperationBrcode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="circleLoanFlag" >
        CIRCLE_LOAN_FLAG = #circleLoanFlag:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="tripleProtocolType" >
        TRIPLE_PROTOCOL_TYPE = #tripleProtocolType:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryMode" >
        DELIVERY_MODE = #deliveryMode:VARCHAR#
      </isNotNull>
    </dynamic>
    where PROTOCOL_NO = #protocolNo:VARCHAR#
  </update>
  <update id="updateByPrimaryKey" parameterClass="com.huateng.scf.bas.cnt.dao.model.BCntMprotBaseInfo" >
    update B_CNT_MPROT_BASE_INFO
    set PROTOCOL_CODE = #protocolCode:VARCHAR#,
      PROTOCOL_TYPE = #protocolType:CHAR#,
      PRODUCT_ID = #productId:VARCHAR#,
      SIGN_DATE = #signDate:CHAR#,
      START_DATE = #startDate:CHAR#,
      END_DATE = #endDate:CHAR#,
      TENOR = #tenor:VARCHAR#,
      CURCD = #curcd:CHAR#,
      PROT_AMT = #protAmt:DECIMAL#,
      SIGN_IN = #signIn:VARCHAR#,
      STATUS = #status:CHAR#,
      OTHER_DES = #otherDes:VARCHAR#,
      STATE = #state:CHAR#,
      TLRNO = #tlrno:VARCHAR#,
      BRCODE = #brcode:VARCHAR#,
      UPDATE_STATE = #updateState:CHAR#,
      UPDATE_DATE = #updateDate:TIMESTAMP#,
      OTHERPROTOCOL_NO = #otherprotocolNo:VARCHAR#,
      LOAN_PERCENT = #loanPercent:DECIMAL#,
      MONI_TYPE = #moniType:CHAR#,
      LOW_PRICE_NEW = #lowPriceNew:DECIMAL#,
      ARRIVED_MANAGE_MODE = #arrivedManageMode:CHAR#,
      SELL_OFF_FLAG = #sellOffFlag:CHAR#,
      PRICE_DROP_RATE = #priceDropRate:DECIMAL#,
      COOPERATION_BRCODE = #cooperationBrcode:VARCHAR#,
      CIRCLE_LOAN_FLAG = #circleLoanFlag:CHAR#,
      TRIPLE_PROTOCOL_TYPE = #tripleProtocolType:CHAR#,
      DELIVERY_MODE = #deliveryMode:VARCHAR#
    where PROTOCOL_NO = #protocolNo:VARCHAR#
  </update>
   <select id="queryThreeProtocolListCount" parameterClass="java.util.HashMap" resultClass="java.lang.Integer" >
   	  SELECT count(1)
	  FROM B_CNT_MPROT_BASE_INFO mpbi,
	       B_CNT_MPROT_DEAL_INFO mpdi,
	       B_CNT_MPROT_PART_INFO a,
	       B_CNT_MPROT_PART_INFO b,
	       B_CNT_MPROT_PART_INFO c,
       	   B_PRD_INFO prd
       	   ,B_CRM_BASE_INFO ca
	 WHERE 1 = 1
	   AND a.role = '03'
	   AND b.role = '04'
	   AND c.role = '05'
	   AND mpbi.protocol_no = mpdi.protocol_no
	   AND mpbi.protocol_no = a.protocol_no
	   AND mpbi.Protocol_No = B.PROTOCOL_NO
	   AND mpbi.protocol_no = c.protocol_no
	   AND mpbi.product_id =prd.PRODUCT_ID
	   AND mpbi.protocol_type = '07' 
	    <isNotNull prepend="AND" property="sellerNm" >
        	<![CDATA[ca.cname like '%' || #sellerNm# || '%']]>
    	</isNotNull>
     ORDER BY mpbi.protocol_no DESC
   </select>

   <select id="queryThreeProtocolList" resultMap="ThreeProtocolVOMap" parameterClass="java.util.HashMap" >
   	SELECT 
   	   a.custcd,
   	   ca.cname sellerNm,
       a.actno balanceAccount,
       a.bail_actno bailAccount,
       a.address sellerRegAddr,
       a.attn sellerContactName,
       b.custcd coreCustcd,
       cb.cname coreNm,
       b.actno coreAccount,
       b.address coreRegAddr,
       b.attn coreContactName,
       c.custcd fouCd,
       cc.cname fouName,
       c.actno refundAccount,
       mpbi.protocol_no,
       mpbi.protocol_code,
       mpbi.protocol_type,
       mpbi.product_id,
       mpbi.sign_date,
       mpbi.start_date,
       mpbi.end_date,
       mpbi.tenor,
       mpbi.curcd,
       mpbi.prot_amt,
       mpbi.sign_in,
       mpbi.status,
       mpbi.other_des,
       mpbi.state,
       mpbi.tlrno,
       mpbi.brcode,
       mpbi.update_state,
       mpbi.update_date,
       mpbi.otherprotocol_no,
       mpbi.loan_percent,
       mpbi.moni_type,
       mpbi.low_price_new,
       mpbi.arrived_manage_mode,
       mpbi.sell_off_flag,
       mpbi.price_drop_rate,
       mpbi.cooperation_brcode,
       mpdi.bail_amount,
       mpdi.first_bail_ratio,
       mpdi.first_bail_type,
       mpdi.loan_way,
       mpdi.loan_days,
       mpdi.goods_nm,
       mpdi.take_mode,
       mpdi.core_cust_duty,
       mpdi.mortgage_manage_mode,
       mpdi.is_insurance,
       mpdi.fou_address,
       mpdi.tri_conventions,
       mpdi.condignee,
       mpdi.trasportation_mode,
       mpdi.delivery_points,
       mpdi.destination,
       mpdi.delivery_amount,
       mpdi.duty_assume_type,
       mpdi.other_cust_name,
       prd.PRODUCT_NAME
  FROM B_CNT_MPROT_BASE_INFO mpbi,
       B_CNT_MPROT_DEAL_INFO mpdi,
       B_CNT_MPROT_PART_INFO a,
       B_CNT_MPROT_PART_INFO b,
       B_CNT_MPROT_PART_INFO c,
       B_PRD_INFO prd
       <!-- 买方、卖方、承担责任方名称 从客户表取 -->
       ,B_CRM_BASE_INFO ca
       ,B_CRM_BASE_INFO cb
       ,B_CRM_BASE_INFO cc
 WHERE 1 = 1
	<isNotNull prepend="AND" property="roleCredit" >
        <![CDATA[a.role=#roleCredit#]]>
    </isNotNull>
    <isNotNull prepend="AND" property="roleCore" >
        <![CDATA[b.role=#roleCore#]]>
    </isNotNull>
    <isNotNull prepend="AND" property="roleBackcore" >
        <![CDATA[c.role=#roleBackcore#]]>
    </isNotNull>
   AND mpbi.protocol_no = mpdi.protocol_no
   AND mpbi.protocol_no = a.protocol_no
   AND mpbi.Protocol_No = B.PROTOCOL_NO
   AND mpbi.protocol_no = c.protocol_no
   AND mpbi.product_id =prd.PRODUCT_ID
   and a.custcd =ca.custcd
   and b.custcd =cb.custcd
   and c.custcd =cc.custcd
   <isNotNull prepend="AND" property="protocolType" >
        <![CDATA[mpbi.protocol_type=#protocolType#]]>
   </isNotNull>
    <isNotNull prepend="AND" property="sellerNm" >
        <![CDATA[ca.cname like '%' || #sellerNm# || '%']]>
    </isNotNull>
    <isNotNull prepend="AND" property="coreNm" >
        <![CDATA[cb.cname like '%' || #coreNm# || '%']]>
    </isNotNull>
    <isNotNull prepend="AND" property="fouName" >
        <![CDATA[cc.cname like '%' || #fouName# || '%']]>
    </isNotNull>
    <isNotNull prepend="AND" property="protocolNo" >
        <![CDATA[mpbi.protocol_no like '%' || #protocolNo# || '%']]>
    </isNotNull>
    <isNotNull prepend="AND" property="productId" >
        <![CDATA[mpbi.product_id=#productId#]]>
    </isNotNull>
    <isNotNull prepend="AND" property="state" >
        <![CDATA[mpbi.state=#state#]]>
    </isNotNull>
    
     ORDER BY mpbi.protocol_no DESC
  </select>
  


</sqlMap>